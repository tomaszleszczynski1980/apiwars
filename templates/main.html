{% extends "layout.html" %}

{% block scripts %}
{% endblock %}

{% block content %}
<div class="main_table">
    <h1>Star Wars universe planets</h1>

    <a href="/{{ prev[-1] if prev}}">
        <button id="previous" type="button" class="nav_btn" {{ 'disabled' if not prev }}>Previous</button>
    </a>
    <a href="/{{ nextt[-1] if nextt }}">
        <button id="next" type="button" class="nav_btn" {{ 'disabled' if not nextt }}>Next</button>
    </a>

    <table>
        <thead>
            <tr>
            {% for key in planets[0] %}
                <th>{{ key }}</th>
            {% endfor %}
                <th></th>
            </tr>
        </thead>
        <tbody>
        {% for planet in planets %}
            <tr>
            {% for key, item in planet.items() %}
                {% set measure = {'Diameter':' km', 'Surface water':'%', 'Population':' people'} %}
                {% if key == 'Residents' %}
                    <td>
                    {% if item|length == 0 %}
                        No known residents
                    {% else %}
                         <button type="button" id="resident_{{ planet['name'] }}">{{ item|length }} resident(s)</button>
                    {% endif %}
                    </td>
                {% else %}
                    <td>{{ item }}{{ measure[key] if key in measure and item != 'unknown' }}</td>
                {% endif %}
            {% endfor %}
                    <td><button type="button" id="vote_{{ planet['name'] }}">Vote</button></td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}